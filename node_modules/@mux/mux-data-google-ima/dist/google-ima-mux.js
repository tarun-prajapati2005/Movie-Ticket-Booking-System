/*!
 * @mux/mux-data-google-ima
 * @version 0.3.4
 * @copyright 2026 Mux, Inc
 */
!function(){var e,t;e=this,t=function(){return function(){var e={254:function(e,t,a){e.exports=a(277).default},277:function(e,t,a){"use strict";a.d(t,{default:function(){return xa}});var r=Object.create,i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,d=function(e,t){return function(){return e&&(t=e(e=0)),t}},l=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},c=function(e,t,a){return a=null!=e?r(s(e)):{},function(e,t,a,r){if(t&&"object"==typeof t||"function"==typeof t)for(var s,d=o(t),l=0,c=d.length;l<c;l++)s=d[l],!u.call(e,s)&&s!==a&&i(e,s,{get:function(e){return t[e]}.bind(null,s),enumerable:!(r=n(t,s))||r.enumerable});return e}(!t&&e&&e.__esModule?a:i(a,"default",{value:e,enumerable:!0}),e)},p=l((function(e,t){var a;a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t.exports=a}));function _(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):_(e,t)}var h=d((function(){h()}));function v(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var f=d((function(){})),m=l((function(e,t){var a=Array.prototype.slice;t.exports=function(e,t){for(("length"in e||(e=[e]),e=a.call(e));e.length;){var r=e.shift(),i=t(r);if(i)return i;r.childNodes&&r.childNodes.length&&(e=a.call(r.childNodes).concat(e))}}})),y=l((function(e,t){function a(e,t){if(!_(this,a))return new a(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}h(),t.exports=a,a.prototype.nodeType=8,a.prototype.nodeName="#comment",a.prototype.toString=function(){return"[object Comment]"}})),g=l((function(e,t){function a(e,t){if(!_(this,a))return new a(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}h(),t.exports=a,a.prototype.type="DOMTextNode",a.prototype.nodeType=3,a.prototype.nodeName="#text",a.prototype.toString=function(){return this.data},a.prototype.replaceData=function(e,t,a){var r=this.data,i=r.substring(0,e),n=r.substring(e+t,r.length);this.data=i+a+n,this.length=this.data.length}})),b=l((function(e,t){t.exports=function(e){var t=this,a=e.type;e.target||(e.target=t),t.listeners||(t.listeners={});var r=t.listeners[a];if(r)return r.forEach((function(a){e.currentTarget=t,"function"==typeof a?a(e):a.handleEvent(e)}));t.parentNode&&t.parentNode.dispatchEvent(e)}})),T=l((function(e,t){t.exports=function(e,t){var a=this;a.listeners||(a.listeners={}),a.listeners[e]||(a.listeners[e]=[]),-1===a.listeners[e].indexOf(t)&&a.listeners[e].push(t)}})),w=l((function(e,t){t.exports=function(e,t){var a=this;if(a.listeners&&a.listeners[e]){var r=a.listeners[e],i=r.indexOf(t);-1!==i&&r.splice(i,1)}}})),E=l((function(e,t){f(),t.exports=r;var a=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function r(e){switch(e.nodeType){case 3:return o(e.data);case 8:return"\x3c!--"+e.data+"--\x3e";default:return function(e){var t=[],s=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(s=s.toLowerCase()),t.push("<"+s+function(e){var t=[];for(var a in e)i(e,a)&&t.push({name:a,value:e[a]});for(var r in e._attributes)for(var o in e._attributes[r]){var s=e._attributes[r][o],u=(s.prefix?s.prefix+":":"")+o;t.push({name:u,value:s.value})}return e.className&&t.push({name:"class",value:e.className}),t.length?n(t):""}(e)+function(e){var t=e.dataset,a=[];for(var r in t)a.push({name:"data-"+r,value:t[r]});return a.length?n(a):""}(e)),a.indexOf(s)>-1?t.push(" />"):(t.push(">"),e.childNodes.length?t.push.apply(t,e.childNodes.map(r)):e.textContent||e.innerText?t.push(o(e.textContent||e.innerText)):e.innerHTML&&t.push(e.innerHTML),t.push("</"+s+">")),t.join("")}(e)}}function i(e,t){var a=v(e[t]);return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===a||"boolean"===a||"number"===a)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t}function n(e){var t=[];return e.forEach((function(e){var a=e.name,r=e.value;"style"===a&&(r=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach((function(a){var r=e[a];a=a.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),t+=a+":"+r+";"})),t}(r)),t.push(a+'="'+function(e){return o(e).replace(/"/g,"&quot;")}(r)+'"')})),t.length?" "+t.join(" "):""}function o(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}})),k=l((function(e,t){h();var a=m(),r=b(),i=T(),n=w(),o=E(),s="http://www.w3.org/1999/xhtml";function u(e,t,a){if(!_(this,u))return new u(e);var r=void 0===a?s:a||null;this.tagName=r===s?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=r,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}t.exports=u,u.prototype.type="DOMElement",u.prototype.nodeType=1,u.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},u.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var a=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[a]=e,e.parentNode=this,t},u.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},u.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var a=null==t?-1:this.childNodes.indexOf(t);return a>-1?this.childNodes.splice(a,0,e):this.childNodes.push(e),e.parentNode=this,e},u.prototype.setAttributeNS=function(e,t,a){var r=null,i=t,n=t.indexOf(":");n>-1&&(r=t.substr(0,n),i=t.substr(n+1)),"INPUT"===this.tagName&&"type"===t?this.type=a:(this._attributes[e]||(this._attributes[e]={}))[i]={value:a,prefix:r}},u.prototype.getAttributeNS=function(e,t){var a=this._attributes[e],r=a&&a[t]&&a[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof r?null:r},u.prototype.removeAttributeNS=function(e,t){var a=this._attributes[e];a&&delete a[t]},u.prototype.hasAttributeNS=function(e,t){var a=this._attributes[e];return!!a&&t in a},u.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},u.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},u.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},u.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},u.prototype.removeEventListener=n,u.prototype.addEventListener=i,u.prototype.dispatchEvent=r,u.prototype.focus=function(){},u.prototype.toString=function(){return o(this)},u.prototype.getElementsByClassName=function(e){var t=e.split(" "),r=[];return a(this,(function(e){if(1===e.nodeType){var a=(e.className||"").split(" ");t.every((function(e){return-1!==a.indexOf(e)}))&&r.push(e)}})),r},u.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return a(this.childNodes,(function(a){1===a.nodeType&&("*"===e||a.tagName.toLowerCase()===e)&&t.push(a)})),t},u.prototype.contains=function(e){return a(this,(function(t){return e===t}))||!1}})),D=l((function(e,t){h();var a=k();function r(e){if(!_(this,r))return new r;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}t.exports=r,r.prototype.type="DocumentFragment",r.prototype.nodeType=11,r.prototype.nodeName="#document-fragment",r.prototype.appendChild=a.prototype.appendChild,r.prototype.replaceChild=a.prototype.replaceChild,r.prototype.removeChild=a.prototype.removeChild,r.prototype.toString=function(){return this.childNodes.map((function(e){return String(e)})).join("")}})),A=l((function(e,t){function a(e){}t.exports=a,a.prototype.initEvent=function(e,t,a){this.type=e,this.bubbles=t,this.cancelable=a},a.prototype.preventDefault=function(){}})),x=l((function(e,t){h();var a=m(),r=y(),i=g(),n=k(),o=D(),s=A(),u=b(),d=T(),l=w();function c(){if(!_(this,c))return new c;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}t.exports=c;var p=c.prototype;p.createTextNode=function(e){return new i(e,this)},p.createElementNS=function(e,t){var a=null===e?null:String(e);return new n(t,this,a)},p.createElement=function(e){return new n(e,this)},p.createDocumentFragment=function(){return new o(this)},p.createEvent=function(e){return new s(e)},p.createComment=function(e){return new r(e,this)},p.getElementById=function(e){return e=String(e),a(this.childNodes,(function(t){if(String(t.id)===e)return t}))||null},p.getElementsByClassName=n.prototype.getElementsByClassName,p.getElementsByTagName=n.prototype.getElementsByTagName,p.contains=n.prototype.contains,p.removeEventListener=l,p.addEventListener=d,p.dispatchEvent=u})),S=l((function(e,t){var a=x();t.exports=new a})),P=l((function(e,t){var a,r="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},i=S();"undefined"!=typeof document?a=document:(a=r["__GLOBAL_DOCUMENT_CACHE@4"])||(a=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=a}));function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function O(e,t){if(e){if("string"==typeof e)return R(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if("Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return R(e,t)}}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,i,n=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}return n}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q=c(p()),I=c(p()),N=c(p()),C={now:function(){var e=N.default.performance,t=e&&e.timing,a=t&&t.navigationStart,r="number"==typeof a&&"function"==typeof e.now?a+e.now():Date.now();return Math.round(r)}},j=function(){var e,t,a;if("function"==typeof(null===(e=I.default.crypto)||void 0===e?void 0:e.getRandomValues)){a=new Uint8Array(32),I.default.crypto.getRandomValues(a);for(var r=0;r<32;r++)a[r]=a[r]%16}else{a=[];for(var i=0;i<32;i++)a[i]=16*Math.random()|0}var n=0;t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t="x"===e?a[n]:3&a[n]|8;return n++,t.toString(16)}));var o=C.now(),s=null==o?void 0:o.toString(16).substring(3);return s?t.substring(0,28)+s:t},H=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},M=function(e){if(e&&void 0!==e.nodeName)return e.muxId||(e.muxId=H()),e.muxId;var t;try{t=document.querySelector(e)}catch(e){}return t&&!t.muxId&&(t.muxId=e),(null==t?void 0:t.muxId)||e},U=function(e){var t;e&&void 0!==e.nodeName?e=M(t=e):t=document.querySelector(e);var a=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,a]};function B(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var F=0,Q=1,G=2,J=3,W=4,V=function(e){var t,a,r,i,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=e?[console,e]:[console],u=(t=console.trace).bind.apply(t,B(s)),d=(a=console.info).bind.apply(a,B(s)),l=(r=console.debug).bind.apply(r,B(s)),c=(i=console.warn).bind.apply(i,B(s)),p=(n=console.error).bind.apply(n,B(s)),_=o;return{trace:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(_>F))return u.apply(void 0,B(t))},debug:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(_>Q))return l.apply(void 0,B(t))},info:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(_>G))return d.apply(void 0,B(t))},warn:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(_>J))return c.apply(void 0,B(t))},error:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(_>W))return p.apply(void 0,B(t))},get level(){return _},set level(e){e!==this.level&&(_=null!=e?e:o)}}}("[mux]"),z=c(p());function K(){return"1"===(z.default.doNotTrack||z.default.navigator&&z.default.navigator.doNotTrack)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){if(!_(e,t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,a){return t&&$(e.prototype,t),a&&$(e,a),e}function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t,a){return ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=te(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(a||e):i.value}},ae(e,t,a||e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],!(t.indexOf(a)>=0)&&(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ne(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?Y(e):t}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=te(e);if(t){var i=te(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return ne(this,a)}}h(),f();var se=function(e){return ue(e)[0]},ue=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,a=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return a&&(t=(a.match(/[^\.]+\.[^\.]+$/)||[])[0]),[a,t]},de=c(p()),le={exists:function(){var e=de.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=de.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=de.default.performance,t=e&&e.timing;return t&&t.navigationStart}};function ce(e,t,a){a=void 0===a?1:a,e[t]=e[t]||0,e[t]+=a}function pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){ee(e,t,a[t])}))}return e}function _e(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}var he=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],ve=["x-cdn","content-type"].concat(he);function fe(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach((function(e){if(e){var a=e.split(": "),r=a.shift();r&&(ve.indexOf(r.toLowerCase())>=0||0===r.toLowerCase().indexOf("x-litix-"))&&(t[r]=a.join(": "))}})),t}function me(e){if(e){var t=he.find((function(t){return void 0!==e[t]}));return t?e[t]:void 0}}var ye=function(e){var t={};for(var a in e){var r=e[a];-1!==r["DATA-ID"].search("io.litix.data.")&&(t[r["DATA-ID"].replace("io.litix.data.","")]=r.VALUE)}return t},ge=function(e){if(!e)return{};var t=le.navigationStart(),a=e.loading,r=a?a.start:e.trequest,i=a?a.first:e.tfirst,n=a?a.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+r),responseStart:Math.round(t+i),responseEnd:Math.round(t+n)}},be=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return fe(e.getAllResponseHeaders())},Te=function(e,t){if(!e||!e.requestEndDate)return{};var a,r=se(e.url),i=e.url,n=e.bytesLoaded,o=new Date(e.requestStartDate).getTime(),s=new Date(e.firstByteDate).getTime(),u=new Date(e.requestEndDate).getTime(),d=isNaN(e.duration)?0:e.duration,l="function"==typeof t.getMetricsFor?t.getMetricsFor(e.mediaType).HttpList:t.getDashMetrics().getHttpRequests(e.mediaType);return l.length>0&&(a=fe(l[l.length-1]._responseHeaders||"")),{requestStart:o,requestResponseStart:s,requestResponseEnd:u,requestBytesLoaded:n,requestResponseHeaders:a,requestMediaDuration:d,requestHostname:r,requestUrl:i,requestId:a?me(a):void 0}},we=function(e,t){var a=t.getQualityFor(e),r=t.getCurrentTrackFor(e).bitrateList;return r?{currentLevel:a,renditionWidth:r[a].width||null,renditionHeight:r[a].height||null,renditionBitrate:r[a].bandwidth}:{}},Ee=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]},ke=function(e){try{var t,a;return null===(a=e.getVersion)||void 0===a||null===(t=a.call(e))||void 0===t?void 0:t.split(".").map((function(e){return parseInt(e)}))[0]}catch(e){return!1}},De=0,Ae=function(){function e(){X(this,e),ee(this,"_listeners",void 0)}return Z(e,[{key:"on",value:function(e,t,a){return t._eventEmitterGuid=t._eventEmitterGuid||++De,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],a&&(t=t.bind(a)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var a=this._listeners&&this._listeners[e];a&&a.forEach((function(e,r){e._eventEmitterGuid===t._eventEmitterGuid&&a.splice(r,1)}))}},{key:"one",value:function(e,t,a){var r=this;t._eventEmitterGuid=t._eventEmitterGuid||++De;var i=function(){r.off(e,i),t.apply(a||this,arguments)};i._eventEmitterGuid=t._eventEmitterGuid,this.on(e,i)}},{key:"emit",value:function(e,t){var a=this;if(this._listeners){t=t||{};var r=this._listeners["before"+e]||[],i=this._listeners["before*"]||[],n=this._listeners[e]||[],o=this._listeners["after"+e]||[],s=function(t,r){(t=t.slice()).forEach((function(t){t.call(a,{type:e},r)}))};s(r,t),s(i,t),s(n,t),s(o,t)}}}]),e}(),xe=Ae,Se=c(p()),Pe=function(){function e(t){var a=this;X(this,e),ee(this,"_playbackHeartbeatInterval",void 0),ee(this,"_playheadShouldBeProgressing",void 0),ee(this,"pm",void 0),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",(function(){a._playheadShouldBeProgressing=!0})),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",(function(){t.data.player_is_paused?a._stopPlaybackHeartbeatInterval():a._startPlaybackHeartbeatInterval()})),t.on("timeupdate",(function(){null!==a._playbackHeartbeatInterval&&t.emit("playbackheartbeat")})),t.on("devicesleep",(function(e,r){null!==a._playbackHeartbeatInterval&&(Se.default.clearInterval(a._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:r.viewer_time}),a._playbackHeartbeatInterval=null)}))}return Z(e,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=Se.default.setInterval((function(){e.pm.emit("playbackheartbeat")}),this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(Se.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e}(),Re=function e(t){var a=this;X(this,e),ee(this,"viewErrored",void 0),t.on("viewinit",(function(){a.viewErrored=!1})),t.on("error",(function(e,r){try{var i=t.errorTranslator({player_error_code:r.player_error_code,player_error_message:r.player_error_message,player_error_context:r.player_error_context,player_error_severity:r.player_error_severity,player_error_business_exception:r.player_error_business_exception});i&&(t.data.player_error_code=i.player_error_code||r.player_error_code,t.data.player_error_message=i.player_error_message||r.player_error_message,t.data.player_error_context=i.player_error_context||r.player_error_context,t.data.player_error_severity=i.player_error_severity||r.player_error_severity,t.data.player_error_business_exception=i.player_error_business_exception||r.player_error_business_exception,a.viewErrored=!0)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),a.viewErrored=!0}})),t.on("aftererror",(function(){var e,a,r,i,n;null===(e=t.data)||void 0===e||delete e.player_error_code,null===(a=t.data)||void 0===a||delete a.player_error_message,null===(r=t.data)||void 0===r||delete r.player_error_context,null===(i=t.data)||void 0===i||delete i.player_error_severity,null===(n=t.data)||void 0===n||delete n.player_error_business_exception}))},Oe=function(){function e(t){X(this,e),ee(this,"_watchTimeTrackerLastCheckedTime",void 0),ee(this,"pm",void 0),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return Z(e,[{key:"_updateWatchTime",value:function(e,t){var a=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=a),ce(this.pm.data,"view_watch_time",a-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=a}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e}(),Le=function(){function e(t){var a=this;X(this,e),ee(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),ee(this,"_lastTime",void 0),ee(this,"_isAdPlaying",void 0),ee(this,"_callbackUpdatePlaybackTime",void 0),ee(this,"pm",void 0),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=C.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null,t.on("viewinit",(function(){a.pm.data.view_playing_time_ms_cumulative=0}));var r=this._startPlaybackTimeTracking.bind(this);t.on("playing",r),t.on("adplaying",r),t.on("seeked",r),t.on("rebufferend",r);var i=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",i),t.on("seeking",i),t.on("rebufferstart",i),t.on("adplaying",(function(){a._isAdPlaying=!0})),t.on("adended",(function(){a._isAdPlaying=!1})),t.on("adpause",(function(){a._isAdPlaying=!1})),t.on("adbreakstart",(function(){a._isAdPlaying=!1})),t.on("adbreakend",(function(){a._isAdPlaying=!1})),t.on("adplay",(function(){a._isAdPlaying=!1})),t.on("viewinit",(function(){a._playbackTimeTrackerLastPlayheadPosition=-1,a._lastTime=C.now(),a._isAdPlaying=!1,a._callbackUpdatePlaybackTime=null}))}return Z(e,[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this._lastTime=C.now(),this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time||0,t=C.now(),a=t-this._lastTime,r=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?r=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(r=a),r>0&&r<=1e3&&ce(this.pm.data,"view_content_playback_time",r),null!==this._callbackUpdatePlaybackTime&&a>0&&a<=1e3&&(this._isAdPlaying&&ce(this.pm.data,"ad_playing_time_ms_cumulative",a),ce(this.pm.data,"view_playing_time_ms_cumulative",a)),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),e}(),qe=function(){function e(t){X(this,e),ee(this,"pm",void 0),this.pm=t;var a=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",a),t.on("playbackheartbeatend",a),t.on("timeupdate",a),t.on("destroy",(function(){t.off("timeupdate",a)}))}return Z(e,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var a=this,r=function(){a.pm.currentFragmentPDT&&a.pm.currentFragmentStart&&(a.pm.data.player_program_time=a.pm.currentFragmentPDT+a.pm.data.player_playhead_time-a.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,r(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var i=this.pm.getPlayheadTime();void 0!==i&&(this.pm.data.player_playhead_time=i,r(),this._updateMaxPlayheadPosition())}}}]),e}(),Ie=3e5,Ne=function e(t){if(X(this,e),!t.disableRebufferTracking){var a,r=function(e,t){i(t),a=void 0},i=function(e){if(a){var r=e.viewer_time-a;ce(t.data,"view_rebuffer_duration",r),a=e.viewer_time,t.data.view_rebuffer_duration>Ie&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(Ie,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",(function(e,t){return i(t)})),t.on("rebufferstart",(function(e,i){a||(ce(t.data,"view_rebuffer_count",1),a=i.viewer_time,t.one("rebufferend",r))})),t.on("viewinit",(function(){a=void 0,t.off("rebufferend",r)}))}},Ce=function(){function e(t){var a=this;X(this,e),ee(this,"_lastCheckedTime",void 0),ee(this,"_lastPlayheadTime",void 0),ee(this,"_lastPlayheadTimeUpdatedTime",void 0),ee(this,"_rebuffering",void 0),ee(this,"pm",void 0),this.pm=t,!t.disableRebufferTracking&&!t.disablePlayheadRebufferTracking&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",(function(){a._cleanupRebufferTracker(null,{viewer_time:C.now()})})))}return Z(e,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime)if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var a=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&a>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0);else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var r=this.pm.data.player_playhead_time-this._lastPlayheadTime,i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&r>0&&i-r>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+i-r}))}a?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e}(),je=Ce,He=function(){function e(t){var a=this;X(this,e),ee(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){var e=t.data,r=e.view_id;if(!e.view_program_changed){var i=function(e,i){var n=i.viewer_time;("playing"===e.type&&void 0===t.data.view_time_to_first_frame||"adplaying"===e.type&&(void 0===t.data.view_time_to_first_frame||a._inPrerollPosition()))&&a.calculateTimeToFirstFrame(n||C.now(),r)};t.one("playing",i),t.one("adplaying",i),t.one("viewend",(function(){t.off("playing",i),t.off("adplaying",i)}))}}))}return Z(e,[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.pm.pageLoadInitTime&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.pm.pageLoadInitTime))}}]),e}(),Me=function e(t){var a=this;X(this,e),ee(this,"_lastPlayerHeight",void 0),ee(this,"_lastPlayerWidth",void 0),ee(this,"_lastPlayheadPosition",void 0),ee(this,"_lastSourceHeight",void 0),ee(this,"_lastSourceWidth",void 0),t.on("viewinit",(function(){a._lastPlayheadPosition=-1})),["pause","rebufferstart","seeking","error","adbreakstart","hb","renditionchange","orientationchange","viewend","playbackmodechange"].forEach((function(e){t.on(e,(function(){if(a._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&a._lastPlayerWidth>=0&&a._lastSourceWidth>0&&a._lastPlayerHeight>=0&&a._lastSourceHeight>0){var e=t.data.player_playhead_time-a._lastPlayheadPosition;if(e<0)return void(a._lastPlayheadPosition=-1);var r=Math.min(a._lastPlayerWidth/a._lastSourceWidth,a._lastPlayerHeight/a._lastSourceHeight),i=Math.max(0,r-1),n=Math.max(0,1-r);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,i),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,n),ce(t.data,"view_total_content_playback_time",e),ce(t.data,"view_total_upscaling",i*e),ce(t.data,"view_total_downscaling",n*e)}a._lastPlayheadPosition=-1}))})),["playing","hb","renditionchange","orientationchange","playbackmodechange"].forEach((function(e){t.on(e,(function(){a._lastPlayheadPosition=t.data.player_playhead_time,a._lastPlayerWidth=t.data.player_width,a._lastPlayerHeight=t.data.player_height,a._lastSourceWidth=t.data.video_source_width,a._lastSourceHeight=t.data.video_source_height}))}))},Ue=function e(t){var a=this;X(this,e),ee(this,"isSeeking",void 0),this.isSeeking=!1;var r=-1,i=function(){var e=C.now(),i=(t.data.viewer_time||e)-(r||e);ce(t.data,"view_seek_duration",i),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,i),a.isSeeking=!1,r=-1};t.on("seeking",(function(e,n){Object.assign(t.data,n),a.isSeeking&&n.viewer_time-r<=2e3?r=n.viewer_time:(a.isSeeking&&i(),a.isSeeking=!0,r=n.viewer_time,ce(t.data,"view_seek_count",1),t.send("seeking"))})),t.on("seeked",(function(){i()})),t.on("viewend",(function(){a.isSeeking&&(i(),t.send("seeked")),a.isSeeking=!1,r=-1}))},Be=function(e,t){e.push(t),e.sort((function(e,t){return e.viewer_time-t.viewer_time}))},Fe=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],Qe=function(){function e(t){var a=this;X(this,e),ee(this,"_adHasPlayed",void 0),ee(this,"_adRequests",void 0),ee(this,"_adResponses",void 0),ee(this,"_currentAdRequestNumber",void 0),ee(this,"_currentAdResponseNumber",void 0),ee(this,"_prerollPlayTime",void 0),ee(this,"_wouldBeNewAdPlay",void 0),ee(this,"isAdBreak",void 0),ee(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){a.isAdBreak=!1,a._currentAdRequestNumber=0,a._currentAdResponseNumber=0,a._adRequests=[],a._adResponses=[],a._adHasPlayed=!1,a._wouldBeNewAdPlay=!0,a._prerollPlayTime=void 0})),Fe.forEach((function(e){return t.on(e,a._updateAdData.bind(a))}));var r=function(){a.isAdBreak=!1};t.on("adbreakstart",(function(){a.isAdBreak=!0})),t.on("play",r),t.on("playing",r),t.on("viewend",r),t.on("adrequest",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+a._currentAdRequestNumber++},r),Be(a._adRequests,r),ce(t.data,"view_ad_request_count"),a.inPrerollPosition()&&(t.data.view_preroll_requested=!0,a._adHasPlayed||ce(t.data,"view_preroll_request_count"))})),t.on("adresponse",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+a._currentAdResponseNumber++},r),Be(a._adResponses,r);var i=a.findAdRequest(r.ad_request_id);i&&ce(t.data,"view_ad_request_time",Math.max(0,r.viewer_time-i.viewer_time))})),t.on("adplay",(function(e,r){a._adHasPlayed=!0,a._wouldBeNewAdPlay&&(a._wouldBeNewAdPlay=!1,ce(t.data,"view_ad_played_count")),a.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,a._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,r.viewer_time-a._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,r.viewer_time-t.data.view_start)),a._prerollPlayTime=r.viewer_time)})),t.on("adplaying",(function(e,r){a.inPrerollPosition()&&void 0===t.data.view_preroll_load_time&&void 0!==a._prerollPlayTime&&(t.data.view_preroll_load_time=r.viewer_time-a._prerollPlayTime,t.data.view_startup_preroll_load_time=r.viewer_time-a._prerollPlayTime)})),t.on("adclicked",(function(e,r){a._wouldBeNewAdPlay||ce(t.data,"view_ad_clicked_count")})),t.on("adskipped",(function(e,r){a._wouldBeNewAdPlay||ce(t.data,"view_ad_skipped_count")})),t.on("adended",(function(){a._wouldBeNewAdPlay=!0})),t.on("aderror",(function(){a._wouldBeNewAdPlay=!0}))}return Z(e,[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var a=L(ue(t.ad_tag_url),2),r=a[0],i=a[1];this.pm.data.view_preroll_ad_tag_domain=i,this.pm.data.view_preroll_ad_tag_hostname=r}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var n=L(ue(t.ad_asset_url),2),o=n[0],s=n[1];this.pm.data.view_preroll_ad_asset_domain=s,this.pm.data.view_preroll_ad_asset_hostname=o}this.pm.data.ad_type="preroll"}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id,null!=t&&t.ad_type&&(this.pm.data.ad_type=null==t?void 0:t.ad_type)}}]),e}(),Ge=function e(t){var a=this;X(this,e),ee(this,"lastWallClockTime",void 0);var r=function(){a.lastWallClockTime=C.now(),t.on("before*",i)},i=function(e){var r=C.now(),i=a.lastWallClockTime;a.lastWallClockTime=r,r-i>3e4&&(t.emit("devicesleep",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:r}),Object.assign(t.data,{viewer_time:r}),t.send("devicewake"))};t.one("playbackheartbeat",r),t.on("playbackheartbeatend",(function(){t.off("before*",i),t.one("playbackheartbeat",r)}))},Je=c(p()),We=function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var r in a)t[r]=a[r]}return t};function t(a){function r(t,i,n){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(n=e({path:"/"},r.defaults,n)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*n.expires),n.expires=s}try{o=JSON.stringify(i),/^[\{\[]/.test(o)&&(i=o)}catch(e){}return i=a.write?a.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}t||(o={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,l=0;l<u.length;l++){var c=u[l].split("="),p=c.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var _=c[0].replace(d,decodeURIComponent);if(p=a.read?a.read(p,_):a(p,_)||p.replace(d,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===_){o=p;break}t||(o[_]=p)}catch(e){}}return o}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,a){r(t,"",e(a,{expires:-1}))},r.withConverter=t,r}return t((function(){}))}(),Ve="muxData",ze=function(){var e;try{e=(We.get(Ve)||"").split("&").reduce((function(e,t){var a=L(t.split("="),2),r=a[0],i=a[1],n=+i,o=i&&n==i?n:i;return e[r]=o,e}),{})}catch(t){e={}}return e},Ke=function(e){try{We.set(Ve,(t=e,Object.entries(t).map((function(e){var t=L(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)})).join("&")),{expires:365})}catch(e){}var t},Ye=function(){var e=ze();return e.mux_viewer_id=e.mux_viewer_id||j(),e.msn=e.msn||Math.random(),Ke(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}};function Xe(e,t){var a=t.beaconCollectionDomain,r=t.beaconDomain;if(a)return"https://"+a;var i=r||"litix.io";return(e=e||"inferred").match(/^[a-z0-9]+$/)?"https://"+e+"."+i:"https://img.litix.io/a.gif"}var $e=c(p()),Ze=function(){var e;switch(et()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},et=function(){var e=$e.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};Ze.getConnectionFromAPI=et;var tt=Ze,at=it({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),rt=it({ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cm:"cmcd",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cv:"cumulative",cx:"connection",cz:"context",da:"data",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mp:"mode",ms:"ms",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",pv:"previous",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function it(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a]]=a);return t}function nt(e){var t={},a={};return Object.keys(e).forEach((function(r){var i=!1;if(e.hasOwnProperty(r)&&void 0!==e[r]){var n=r.split("_"),o=n[0],s=at[o];s||(V.info("Data key word `"+n[0]+"` not expected in "+r),s=o+"_"),n.splice(1).forEach((function(e){"url"===e&&(i=!0),rt[e]?s+=rt[e]:Number.isInteger(Number(e))?s+=e:(V.info("Data key word `"+e+"` not expected in "+r),s+="_"+e+"_")})),i?a[s]=e[r]:t[s]=e[r]}})),Object.assign(t,a)}var ot=c(p()),st=c(P()),ut={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},dt=["hb","requestcompleted","requestfailed","requestcanceled"],lt="https://img.litix.io",ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||lt,this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},ut,t)};ct.prototype.queueEvent=function(e,t){var a=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(a),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},ct.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},ct.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),ot.default.clearTimeout(this._sendTimeout)},ct.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],nt({mux_view_message:"event queue truncated"}));var a=this._createPayload(t);_t(this._beaconUrl,a,!0,(function(){}))},ct.prototype._sendBeaconQueue=function(){var e=this;if(this._postInFlight)this._resendAfterPost=!0;else{var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var a=this._createPayload(t),r=C.now();_t(this._beaconUrl,a,!1,(function(a,i){i?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,V.info("Error sending beacon: "+i)):e._failureCount=0,e._roundTripTime=C.now()-r,e._postInFlight=!1,e._resendAfterPost&&(e._resendAfterPost=!1,e._eventQueue.length>0&&e._sendBeaconQueue())}))}},ct.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},ct.prototype._startBeaconSending=function(){var e=this;ot.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=ot.default.setTimeout((function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()}),this._getNextBeaconTime()))},ct.prototype._createPayload=function(e){var t=this,a={transmission_timestamp:Math.round(C.now())};this._roundTripTime&&(a.rtt_ms=Math.round(this._roundTripTime));var r,i,n,o=function(){r=JSON.stringify({metadata:a,events:i||e}),n=r.length/1024},s=function(){return n<=t._options.maxPayloadKBSize};return o(),s()||(V.info("Payload size is too big ("+n+" kb). Removing unnecessary events."),i=e.filter((function(e){return-1===dt.indexOf(e.e)})),o()),s()||(V.info("Payload size still too big ("+n+" kb). Cropping fields.."),i.forEach((function(e){for(var t in e){var a=e[t];"string"==typeof a&&a.length>51200&&(e[t]=a.substring(0,51200))}})),o()),r};var pt="function"==typeof st.default.exitPictureInPicture?function(e){return e.length<=57344}:function(e){return!1},_t=function(e,t,a,r){if(a&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))r();else if(ot.default.fetch)ot.default.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:pt(t)}).then((function(e){return r(null,e.ok?null:"Error")})).catch((function(e){return r(null,e)}));else{if(ot.default.XMLHttpRequest){var i=new ot.default.XMLHttpRequest;return i.onreadystatechange=function(){if(4===i.readyState)return r(null,200!==i.status?"error":void 0)},i.open("POST",e),i.setRequestHeader("Content-Type","text/plain"),void i.send(t)}r()}},ht=ct,vt=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception","view_playing_time_ms_cumulative","ad_playing_time_ms_cumulative"],ft=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],mt=["ad_id","ad_creative_id","ad_universal_id"],yt=["viewstart","error","ended","viewend"],gt=function(){function e(t,a){var r,i,n,o,s,u,d,l,c,p,_,h,v,f,m,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};X(this,e),ee(this,"mux",void 0),ee(this,"envKey",void 0),ee(this,"options",void 0),ee(this,"eventQueue",void 0),ee(this,"sampleRate",void 0),ee(this,"disableCookies",void 0),ee(this,"respectDoNotTrack",void 0),ee(this,"previousBeaconData",void 0),ee(this,"lastEventTime",void 0),ee(this,"rateLimited",void 0),ee(this,"pageLevelData",void 0),ee(this,"viewerData",void 0),this.mux=t,this.envKey=a,this.options=y,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new ht(Xe(this.envKey,this.options)),this.sampleRate=null!==(v=this.options.sampleRate)&&void 0!==v?v:1,this.disableCookies=null!==(f=this.options.disableCookies)&&void 0!==f&&f,this.respectDoNotTrack=null!==(m=this.options.respectDoNotTrack)&&void 0!==m&&m,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(r=this.options.platform)||void 0===r?void 0:r.name,viewer_application_version:null===(i=this.options.platform)||void 0===i?void 0:i.version,viewer_application_engine:null===(n=this.options.platform)||void 0===n?void 0:n.layout,viewer_device_name:null===(o=this.options.platform)||void 0===o?void 0:o.product,viewer_device_category:"",viewer_device_manufacturer:null===(s=this.options.platform)||void 0===s?void 0:s.manufacturer,viewer_os_family:null===(d=this.options.platform)||void 0===d||null===(u=d.os)||void 0===u?void 0:u.family,viewer_os_architecture:null===(c=this.options.platform)||void 0===c||null===(l=c.os)||void 0===l?void 0:l.architecture,viewer_os_version:null===(_=this.options.platform)||void 0===_||null===(p=_.os)||void 0===p?void 0:p.version,viewer_connection_type:tt(),page_url:null===Je.default||void 0===Je.default||null===(h=Je.default.location)||void 0===h?void 0:h.href},this.viewerData=this.disableCookies?{}:Ye()}return Z(e,[{key:"send",value:function(e,t){if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&K())return V.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!=typeof t)return V.error("A data object was expected in send() but was not provided");var a=this.disableCookies?{}:function(){var e=ze(),t=C.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=j(),e.sst=t),e.sex=t+15e5,Ke(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}(),r=_e(pe({},this.pageLevelData,t,a,this.viewerData),{event:e,env_key:this.envKey});r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var i,n=(null!==(i=r.mux_sample_number)&&void 0!==i?i:0)>=this.sampleRate,o=nt(this._deduplicateBeaconData(e,r));if(this.lastEventTime=this.mux.utils.now(),n)return V.info("Not sending event due to sample rate restriction",e,r,o);if(this.envKey||V.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,r,o),!this.rateLimited)if(V.info("Sending event",e,r,o),this.rateLimited=!this.eventQueue.queueEvent(e,o),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else{if(this.mux.WINDOW_HIDDEN&&"hb"===e)this.eventQueue.flushEvents(!0);else if(yt.indexOf(e)>=0){if("error"===e&&"warning"===t.player_error_severity)return;this.eventQueue.flushEvents()}if(this.rateLimited)return r.event="eventrateexceeded",o=nt(r),this.eventQueue.queueEvent(r.event,o),V.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var a=this,r={},i=t.view_id;if("-1"===i||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)r=pe({},t),i&&(this.previousBeaconData=r),i&&"viewend"===e&&(this.previousBeaconData=null);else{var n=0===e.indexOf("request");Object.entries(t).forEach((function(t){var i=L(t,2),o=i[0],s=i[1];a.previousBeaconData&&(s!==a.previousBeaconData[o]||vt.indexOf(o)>-1||a.objectHasChanged(n,o,s,a.previousBeaconData[o])||a.eventRequiresKey(e,o))&&(r[o]=s,a.previousBeaconData[o]=s)}))}return r}},{key:"objectHasChanged",value:function(e,t,a,r){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"==typeof a&&"object"==typeof r&&Object.keys(a||{}).length===Object.keys(r||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return!!("renditionchange"===e&&0===t.indexOf("video_source_")||mt.includes(t)&&ft.includes(e))}}]),e}(),bt=function e(t){X(this,e);var a=0,r=0,i=0,n=0,o=0,s=0,u=0;t.on("requestcompleted",(function(e,s){var u,d,l=s.request_start,c=s.request_response_start,p=s.request_response_end,_=s.request_bytes_loaded;if(n++,c?(u=c-(null!=l?l:0),d=(null!=p?p:0)-c):d=(null!=p?p:0)-(null!=l?l:0),d>0&&_&&_>0){var h=_/d*8e3;o++,r+=_,i+=d,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,h),t.data.view_average_request_throughput=r/i*8e3,t.data.view_request_count=n,u>0&&(a+=u,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,u),t.data.view_average_request_latency=a/o)}})),t.on("requestfailed",(function(e,a){n++,s++,t.data.view_request_count=n,t.data.view_request_failed_count=s})),t.on("requestcanceled",(function(e,a){n++,u++,t.data.view_request_count=n,t.data.view_request_canceled_count=u}))},Tt=function e(t){var a=this;X(this,e),ee(this,"_lastEventTime",void 0),t.on("before*",(function(e,r){var i=r.viewer_time,n=C.now(),o=a._lastEventTime;if(a._lastEventTime=n,o&&n-o>36e5){var s=Object.keys(t.data).reduce((function(e,a){return 0===a.indexOf("video_")?Object.assign(e,ee({},a,t.data[a])):e}),{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view");var u=t.playbackHeartbeat._playheadShouldBeProgressing;t._resetView(Object.assign({viewer_time:i},s)),t.playbackHeartbeat._playheadShouldBeProgressing=u,t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:i}),"playing"!==e.type&&t.emit("playing",{viewer_time:i}))}}))};function wt(e,t){return(null==e?void 0:e.toLowerCase())===(null==t?void 0:t.toLowerCase())}var Et=function e(t){X(this,e);var a=function(e){var a=function(e){var t;return null!=e&&e.request_type&&("media"===e.request_type||"video"===e.request_type)&&null!==(t=e.request_response_headers)&&void 0!==t&&t["x-cdn"]?e.request_response_headers["x-cdn"]:null!=e&&e.video_cdn?e.video_cdn:null}(e),r=function(e){return null!=e&&e.request_start?e.request_start:null!=e&&e.viewer_time?e.viewer_time:Date.now()}(e);if(null!=a&&!wt(a,n)&&o<=r){n=a,o=r;var i={video_cdn:a};t.emit("cdnchange",i)}},r=null,i=null,n=null,o=0;t.on("viewinit",(function(){r=null,i=null,n=null,o=0})),t.on("beforecdnchange",(function(e,t){var a=null==t?void 0:t.video_cdn;a&&(void 0===t.video_previous_cdn||null===t.video_previous_cdn)&&(wt(a,i)?t.video_previous_cdn=null!=r?r:void 0:(t.video_previous_cdn=null!=i?i:void 0,r=i,i=a))})),t.on("requestcompleted",(function(e,t){a(t)}))},kt=function e(t){var a=this;X(this,e),ee(this,"_emittingAutomaticEvent",!1),ee(this,"_hasInitialized",!1),ee(this,"_currentMode","standard"),t.on("viewstart",(function(){a._hasInitialized||(a._hasInitialized=!0,a._currentMode=t.data.player_playback_mode||"standard",a._emittingAutomaticEvent=!0,t.emit("playbackmodechange",{player_playback_mode:a._currentMode,player_playback_mode_data:"{}"}),a._emittingAutomaticEvent=!1)})),t.on("viewend",(function(){a._hasInitialized=!1})),t.on("playbackmodechange",(function(e,r){a._emittingAutomaticEvent||(r.player_playback_mode_data?function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(r.player_playback_mode_data)||(t.mux.log.warn("Invalid JSON string for player_playback_mode_data"),r.player_playback_mode_data="{}"):r.player_playback_mode_data="{}",t.data.player_playback_mode_data=r.player_playback_mode_data,t.data.player_playback_mode=r.player_playback_mode,a._currentMode=r.player_playback_mode)}))},Dt=function(){function e(t){X(this,e),ee(this,"pm",void 0),ee(this,"_currentRangeStart",void 0),ee(this,"_lastPlayheadTime",void 0),this.pm=t,this._currentRangeStart=null,this._lastPlayheadTime=null,t.on("playbackheartbeat",this._updatePlaybackRange.bind(this)),t.on("playbackheartbeatend",this._endPlaybackRange.bind(this))}return Z(e,[{key:"_updateLastRangeEnd",value:function(){var e=this.pm.data.video_playback_ranges;if(e&&e.length>0){var t=this.pm.data.player_playhead_time||0;e[e.length-1][1]=t}}},{key:"_updatePlaybackRange",value:function(){var e,t=this.pm.data.player_playhead_time||0;if(!(!this.pm.disableAdPlaybackRangeFiltering&&null!==(e=this.pm.adTracker)&&void 0!==e&&e.isAdBreak&&null!==this._lastPlayheadTime&&t<this._lastPlayheadTime)){if(null!==this._lastPlayheadTime&&null!==this._currentRangeStart&&Math.abs(t-this._lastPlayheadTime)>1e3){var a=this.pm.data.video_playback_ranges;a&&a.length>0&&(a[a.length-1][1]=this._lastPlayheadTime),this._currentRangeStart=null}if(null===this._currentRangeStart){var r=this.pm.data.video_playback_ranges||[];r.length>0&&r[r.length-1][1]===t?this._currentRangeStart=r[r.length-1][0]:(this._currentRangeStart=t,r.push([t,t])),this.pm.data.video_playback_ranges=r}else this._updateLastRangeEnd();this._lastPlayheadTime=t}}},{key:"_endPlaybackRange",value:function(){null!==this._currentRangeStart&&(this._updateLastRangeEnd(),this._currentRangeStart=null,this._lastPlayheadTime=null)}}]),e}(),At=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange","cdnchange","playbackmodechange"],xt=new Set(["requestcompleted","requestfailed","requestcanceled"]),St=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(a,e);var t=oe(a);function a(e,r,i){var n;X(this,a),ee(Y(n=t.call(this)),"pageLoadEndTime",void 0),ee(Y(n),"pageLoadInitTime",void 0),ee(Y(n),"_destroyed",void 0),ee(Y(n),"_heartBeatTimeout",void 0),ee(Y(n),"adTracker",void 0),ee(Y(n),"dashjs",void 0),ee(Y(n),"data",void 0),ee(Y(n),"disablePlayheadRebufferTracking",void 0),ee(Y(n),"disableRebufferTracking",void 0),ee(Y(n),"disableAdPlaybackRangeFiltering",void 0),ee(Y(n),"errorTracker",void 0),ee(Y(n),"errorTranslator",void 0),ee(Y(n),"emitTranslator",void 0),ee(Y(n),"getAdData",void 0),ee(Y(n),"getPlayheadTime",void 0),ee(Y(n),"getStateData",void 0),ee(Y(n),"stateDataTranslator",void 0),ee(Y(n),"hlsjs",void 0),ee(Y(n),"id",void 0),ee(Y(n),"longResumeTracker",void 0),ee(Y(n),"minimumRebufferDuration",void 0),ee(Y(n),"mux",void 0),ee(Y(n),"playbackEventDispatcher",void 0),ee(Y(n),"playbackHeartbeat",void 0),ee(Y(n),"playbackHeartbeatTime",void 0),ee(Y(n),"playheadTime",void 0),ee(Y(n),"seekingTracker",void 0),ee(Y(n),"sustainedRebufferThreshold",void 0),ee(Y(n),"watchTimeTracker",void 0),ee(Y(n),"currentFragmentPDT",void 0),ee(Y(n),"currentFragmentStart",void 0),n.pageLoadInitTime=le.navigationStart(),n.pageLoadEndTime=le.domContentLoadedEventEnd();var o={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,disableAdPlaybackRangeFiltering:!1,errorTranslator:function(e){return e},emitTranslator:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t},stateDataTranslator:function(e){return e}};n.mux=e,n.id=r,null!=i&&i.beaconDomain&&n.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),(i=Object.assign(o,i)).data=i.data||{},i.data.property_key&&(i.data.env_key=i.data.property_key,delete i.data.property_key),V.level=i.debug?Q:J,n.getPlayheadTime=i.getPlayheadTime,n.getStateData=i.getStateData||function(){return{}},n.getAdData=i.getAdData||function(){},n.minimumRebufferDuration=i.minimumRebufferDuration,n.sustainedRebufferThreshold=i.sustainedRebufferThreshold,n.playbackHeartbeatTime=i.playbackHeartbeatTime,n.disableRebufferTracking=i.disableRebufferTracking,n.disableRebufferTracking&&n.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),n.disablePlayheadRebufferTracking=i.disablePlayheadRebufferTracking,n.disableAdPlaybackRangeFiltering=i.disableAdPlaybackRangeFiltering,n.errorTranslator=i.errorTranslator,n.emitTranslator=i.emitTranslator,n.stateDataTranslator=i.stateDataTranslator,n.playbackEventDispatcher=new gt(e,i.data.env_key,i),n.data={player_instance_id:j(),mux_sample_rate:i.sampleRate,beacon_domain:i.beaconCollectionDomain||i.beaconDomain},n.data.view_sequence_number=1,n.data.player_sequence_number=1;var s=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"),this.emit("renditionchange"))}.bind(Y(n));if(n.on("viewinit",(function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)})),n.on("videochange",(function(e,t){this._resetView(t)})),n.on("programchange",(function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")})),n.on("fragmentchange",(function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart})),n.on("destroy",n.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var u=function(){var e=void 0!==n.data.view_start;n.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&n.mux.WINDOW_HIDDEN&&(n.data.player_is_paused||n.emit("hb"))};window.addEventListener("visibilitychange",u,!1);var d=function(e){e.persisted||n.destroy()};window.addEventListener("pagehide",d,!1),n.on("destroy",(function(){window.removeEventListener("visibilitychange",u),window.removeEventListener("pagehide",d)}))}return n.on("playerready",(function(e,t){Object.assign(this.data,t)})),At.forEach((function(e){n.on(e,(function(t,a){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,a),this._sanitizeData()})),n.on("after"+e,(function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)}))})),n.on("viewend",(function(e,t){Object.assign(n.data,t)})),n.one("playerready",(function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),this.pageLoadInitTime=this.data.page_load_init_time||this.pageLoadInitTime,this.pageLoadEndTime=this.data.page_load_end_time||this.pageLoadEndTime,!this.mux.PLAYER_TRACKED&&this.pageLoadInitTime&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.pageLoadEndTime)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.pageLoadEndTime||1/0)-this.pageLoadInitTime)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time})),n.longResumeTracker=new Tt(Y(n)),n.errorTracker=new Re(Y(n)),new Ge(Y(n)),n.seekingTracker=new Ue(Y(n)),n.playheadTime=new qe(Y(n)),n.playbackHeartbeat=new Pe(Y(n)),new Me(Y(n)),n.watchTimeTracker=new Oe(Y(n)),new Le(Y(n)),new Dt(Y(n)),n.adTracker=new Qe(Y(n)),new je(Y(n)),new Ne(Y(n)),new He(Y(n)),new bt(Y(n)),new Et(Y(n)),new kt(Y(n)),i.hlsjs&&n.addHLSJS(i),i.dashjs&&n.addDashJS(i),n.emit("viewinit",i.data),n}return Z(a,[{key:"emit",value:function(e,t){var r,i=Object.assign({viewer_time:this.mux.utils.now()},t),n=[e,i];if(this.emitTranslator)try{n=this.emitTranslator(e,i)}catch(e){this.mux.log.warn("Exception in emit translator callback.",e)}null!=n&&n.length&&(r=ae(te(a.prototype),"emit",this)).call.apply(r,[this].concat(B(n)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach((function(e){t[e]=void 0})),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var a=L(ue(t.video_source_url),2),r=a[0],i=a[1];t.video_source_domain=i,t.video_source_hostname=r}delete t.ad_request_id,t.video_playback_ranges&&(t.video_playback_range=JSON.stringify(t.video_playback_ranges.filter((function(e){return e[0]!==e[1]})).map((function(e){return"".concat(e[0],":").concat(e[1])}))),delete t.video_playback_ranges),this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,xt.has(e)||this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_resetView",value:function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}},{key:"_updateStateData",value:function(){var e,t=this.getStateData();if("function"==typeof this.stateDataTranslator)try{t=this.stateDataTranslator(t)}catch(e){this.mux.log.warn("Exception in stateDataTranslator translator callback.",e)}null!==(e=this.data)&&void 0!==e&&e.video_cdn&&null!=t&&t.video_cdn&&(t.video_cdn,t=ie(t,["video_cdn"])),Object.assign(this.data,t),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach((function(t){var a=parseInt(e.data[t],10);e.data[t]=isNaN(a)?void 0:a})),["player_source_url","video_source_url"].forEach((function(t){if(e.data[t]){var a=e.data[t].toLowerCase();(0===a.indexOf("data:")||0===a.indexOf("blob:"))&&(e.data[t]="MSE style URL")}}))}},{key:"_resetVideoData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("video_")&&delete e.data[t]}))}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("view_")&&delete e.data[t]})),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=j(),a=function(){t===e.data.view_id&&ce(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",a):a()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout((function(){e.data.player_is_paused||e.emit("hb")}),1e4)}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,a){var r=arguments.length>4?arguments[4]:void 0,i=e.log,n=e.utils.secondsToMs,o=function(e){var t,a=parseInt(r.version);return 1===a&&null!==e.programDateTime&&(t=e.programDateTime),0===a&&null!==e.pdt&&(t=e.pdt),t};if(le.exists()){var s=function(a,r){return e.emit(t,a,r)},u=function(e,t){var a=t.levels,r=t.audioTracks,i=t.url,n=t.stats,o=t.networkDetails,u=t.sessionData,d={},l={};a.forEach((function(e,t){d[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}})),r.forEach((function(e,t){l[t]={name:e.name,language:e.lang,bitrate:e.bitrate}}));var c=ge(n),p=c.bytesLoaded,_=c.requestStart,h=c.responseStart,v=c.responseEnd;s("requestcompleted",_e(pe({},ye(u)),{request_event_type:e,request_bytes_loaded:p,request_start:_,request_response_start:h,request_response_end:v,request_type:"manifest",request_hostname:se(i),request_response_headers:be(o),request_rendition_lists:{media:d,audio:l,video:{}}}))};a.on(r.Events.MANIFEST_LOADED,u);var d=function(e,t){var a=t.details,r=t.level,i=t.networkDetails,u=t.stats,d=ge(u),l=d.bytesLoaded,c=d.requestStart,p=d.responseStart,_=d.responseEnd,h=a.fragments[a.fragments.length-1],v=o(h)+n(h.duration);s("requestcompleted",{request_event_type:e,request_bytes_loaded:l,request_start:c,request_response_start:p,request_response_end:_,request_current_level:r,request_type:"manifest",request_hostname:se(a.url),request_response_headers:be(i),video_holdback:a.holdBack&&n(a.holdBack),video_part_holdback:a.partHoldBack&&n(a.partHoldBack),video_part_target_duration:a.partTarget&&n(a.partTarget),video_target_duration:a.targetduration&&n(a.targetduration),video_source_is_live:a.live,player_manifest_newest_program_time:isNaN(v)?void 0:v})};a.on(r.Events.LEVEL_LOADED,d);var l=function(e,t){var a=t.details,r=t.networkDetails,i=t.stats,n=ge(i),o=n.bytesLoaded,u=n.requestStart,d=n.responseStart,l=n.responseEnd;s("requestcompleted",{request_event_type:e,request_bytes_loaded:o,request_start:u,request_response_start:d,request_response_end:l,request_type:"manifest",request_hostname:se(a.url),request_response_headers:be(r)})};a.on(r.Events.AUDIO_TRACK_LOADED,l);var c=function(e,t){var r=t.stats,i=t.networkDetails,n=t.frag;r=r||n.stats;var o=ge(r),u=o.bytesLoaded,d=o.requestStart,l=o.responseStart,c=o.responseEnd,p=i?be(i):void 0,_={request_event_type:e,request_bytes_loaded:u,request_start:d,request_response_start:l,request_response_end:c,request_hostname:i?se(i.responseURL):void 0,request_id:p?me(p):void 0,request_response_headers:p,request_media_duration:n.duration,request_url:null==i?void 0:i.responseURL};"main"===n.type?(_.request_type="media",_.request_current_level=n.level,_.request_video_width=(a.levels[n.level]||{}).width,_.request_video_height=(a.levels[n.level]||{}).height,_.request_labeled_bitrate=(a.levels[n.level]||{}).bitrate):_.request_type=n.type,s("requestcompleted",_)};a.on(r.Events.FRAG_LOADED,c);var p=function(e,t){var a=t.frag,r=a.start,i={currentFragmentPDT:o(a),currentFragmentStart:n(r)};s("fragmentchange",i)};a.on(r.Events.FRAG_CHANGED,p);var _=function(e,t){var a=t.type,i=t.details,n=t.response,o=t.fatal,u=t.frag,d=t.networkDetails,l=(null==u?void 0:u.url)||t.url||"",c=d?be(d):void 0;if((i===r.ErrorDetails.MANIFEST_LOAD_ERROR||i===r.ErrorDetails.MANIFEST_LOAD_TIMEOUT||i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT||i===r.ErrorDetails.LEVEL_LOAD_ERROR||i===r.ErrorDetails.LEVEL_LOAD_TIMEOUT||i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT)&&s("requestfailed",{request_error:i,request_url:l,request_hostname:se(l),request_id:c?me(c):void 0,request_type:i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==n?void 0:n.code,request_error_text:null==n?void 0:n.text}),o){var p,_="".concat(l?"url: ".concat(l,"\n"):"")+"".concat(n&&(n.code||n.text)?"response: ".concat(n.code,", ").concat(n.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(p=t.err)||void 0===p?void 0:p.message,"\n"):"");s("error",{player_error_code:a,player_error_message:i,player_error_context:_})}};a.on(r.Events.ERROR,_);var h=function(e,t){var a=t.frag,r=a&&a._url||"";s("requestcanceled",{request_event_type:e,request_url:r,request_type:"media",request_hostname:se(r)})};a.on(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,h);var v=function(e,t){var r=t.level,n=a.levels[r];if(n&&n.attrs&&n.attrs.BANDWIDTH){var o,u=n.attrs.BANDWIDTH,d=parseFloat(n.attrs["FRAME-RATE"]);isNaN(d)||(o=d),u?s("renditionchange",{video_source_fps:o,video_source_bitrate:u,video_source_width:n.width,video_source_height:n.height,video_source_rendition_name:n.name,video_source_codec:null==n?void 0:n.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};a.on(r.Events.LEVEL_SWITCHED,v),a._stopMuxMonitor=function(){a.off(r.Events.MANIFEST_LOADED,u),a.off(r.Events.LEVEL_LOADED,d),a.off(r.Events.AUDIO_TRACK_LOADED,l),a.off(r.Events.FRAG_LOADED,c),a.off(r.Events.FRAG_CHANGED,p),a.off(r.Events.ERROR,_),a.off(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,h),a.off(r.Events.LEVEL_SWITCHED,v),a.off(r.Events.DESTROYING,a._stopMuxMonitor),delete a._stopMuxMonitor},a.on(r.Events.DESTROYING,a._stopMuxMonitor)}else i.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){this.hlsjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,function(e,t,a){var r=e.log;if(a&&a.on){var i=ke(a),n=function(a,r){return e.emit(t,a,r)},o=function(e){var t=e.type,a=(e.data||{}).url;n("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:se(a),request_url:a})};a.on("manifestLoaded",o);var s={},u=function(e){if("function"!=typeof e.getRequests)return null;var t=e.getRequests({state:"executed"});return 0===t.length?null:t[t.length-1]},d=function(e){var t=e.type,a=e.fragmentModel,r=e.chunk,i=u(a);l({type:t,request:i,chunk:r})},l=function(e){var t=e.type,r=e.chunk,i=e.request,o=(r||{}).mediaInfo||{},u=o.type,d=o.bitrateList,l={};(d=d||[]).forEach((function(e,t){l[t]={},l[t].width=e.width,l[t].height=e.height,l[t].bitrate=e.bandwidth,l[t].attrs={}})),"video"===u?s.video=l:"audio"===u?s.audio=l:s.media=l;var c=Te(i,a),p=c.requestStart,_=c.requestResponseStart,h=c.requestResponseEnd,v=c.requestResponseHeaders,f=c.requestMediaDuration,m=c.requestHostname,y=c.requestUrl,g=c.requestId;n("requestcompleted",{request_event_type:t,request_start:p,request_response_start:_,request_response_end:h,request_bytes_loaded:-1,request_type:u+"_init",request_response_headers:v,request_hostname:m,request_id:g,request_url:y,request_media_duration:f,request_rendition_lists:s})};i>=4?a.on("initFragmentLoaded",l):a.on("initFragmentLoaded",d);var c=function(e){var t=e.type,a=e.fragmentModel,r=e.chunk,i=u(a);p({type:t,request:i,chunk:r})},p=function(e){var t=e.type,r=e.chunk,i=e.request,o=r||{},s=o.mediaInfo,u=o.start,d=(s||{}).type,l=Te(i,a),c=l.requestStart,p=l.requestResponseStart,_=l.requestResponseEnd,h=l.requestBytesLoaded,v=l.requestResponseHeaders,f=l.requestMediaDuration,m=l.requestHostname,y=l.requestUrl,g=l.requestId,b=we(d,a),T=b.currentLevel,w=b.renditionWidth,E=b.renditionHeight,k=b.renditionBitrate;n("requestcompleted",{request_event_type:t,request_start:c,request_response_start:p,request_response_end:_,request_bytes_loaded:h,request_type:d,request_response_headers:v,request_hostname:m,request_id:g,request_url:y,request_media_start_time:u,request_media_duration:f,request_current_level:T,request_labeled_bitrate:k,request_video_width:w,request_video_height:E})};i>=4?a.on("mediaFragmentLoaded",p):a.on("mediaFragmentLoaded",c);var _={video:void 0,audio:void 0,totalBitrate:void 0},h=function(){if(_.video&&"number"==typeof _.video.bitrate){if(!_.video.width||!_.video.height)return void r.warn("have bitrate info for video but missing width/height");var e=_.video.bitrate;if(_.audio&&"number"==typeof _.audio.bitrate&&(e+=_.audio.bitrate),e!==_.totalBitrate)return _.totalBitrate=e,{video_source_bitrate:e,video_source_height:_.video.height,video_source_width:_.video.width,video_source_codec:Ee(_.video.codec)}}},v=function(e,t,i){if("number"==typeof e.newQuality){var o=e.mediaType;if("audio"===o||"video"===o){var s=a.getBitrateInfoListFor(o).find((function(t){return t.qualityIndex===e.newQuality}));if(!s||"number"!=typeof s.bitrate)return void r.warn("missing bitrate info for ".concat(o));_[o]=_e(pe({},s),{codec:a.getCurrentTrackFor(o).codec});var u=h();u&&n("renditionchange",u)}}else r.warn("missing evt.newQuality in qualityChangeRendered event",e)};a.on("qualityChangeRendered",v);var f=function(e){var t=e.request,a=e.mediaType;n("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:a,request_hostname:se(t.url)})};a.on("fragmentLoadingAbandoned",f);var m=function(e){var t,a,r=e.error,i=(null==r||null===(t=r.data)||void 0===t?void 0:t.request)||{},o=(null==r||null===(a=r.data)||void 0===a?void 0:a.response)||{};27===(null==r?void 0:r.code)&&n("requestfailed",{request_error:i.type+"_"+i.action,request_url:i.url,request_hostname:se(i.url),request_type:i.mediaType,request_error_code:o.status,request_error_text:o.statusText});var s="".concat(null!=i&&i.url?"url: ".concat(i.url,"\n"):"")+"".concat(null!=o&&o.status||null!=o&&o.statusText?"response: ".concat(null==o?void 0:o.status,", ").concat(null==o?void 0:o.statusText,"\n"):"");n("error",{player_error_code:null==r?void 0:r.code,player_error_message:null==r?void 0:r.message,player_error_context:s})};a.on("error",m),a._stopMuxMonitor=function(){a.off("manifestLoaded",o),a.off("initFragmentLoaded",l),a.off("mediaFragmentLoaded",p),a.off("qualityChangeRendered",v),a.off("error",m),a.off("fragmentLoadingAbandoned",f),delete a._stopMuxMonitor}}else r.warn("Invalid dash.js player reference. Monitoring blocked.")}(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){this.dashjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.dashjs),this.dashjs=void 0)}}]),a}(xe),Pt=St,Rt=c(P());function Ot(){return Rt.default&&!!(Rt.default.fullscreenElement||Rt.default.webkitFullscreenElement||Rt.default.mozFullScreenElement||Rt.default.msFullscreenElement)}var Lt,qt=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],It={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},Nt=c(p());Nt.default&&Nt.default.WeakMap&&(Lt=new WeakMap);var Ct="#EXT-X-TARGETDURATION",jt="#EXT-X-PART-INF",Ht="#EXT-X-SERVER-CONTROL",Mt="#EXTINF",Ut="#EXT-X-PROGRAM-DATE-TIME",Bt="#EXT-X-VERSION",Ft="#EXT-X-SESSION-DATA",Qt=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};Qt.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},Qt.prototype.processLine=function(e){var t=e.indexOf(":"),a=Yt(e,t),r=a[0],i=2===a.length?Wt(a[1]):void 0;if("#"!==r[0])this.currentUri.uri=r,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(r){case Ct:if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break;case jt:Gt(this.manifest,a),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case Ht:Gt(this.manifest,a),this.setHoldBack();break;case Mt:0===i?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break;case Ut:var n=i,o=new Date(n);this.manifest.dateTimeString||(this.manifest.dateTimeString=n,this.manifest.dateTimeObject=o),this.currentUri.dateTimeString=n,this.currentUri.dateTimeObject=o;break;case Bt:Gt(this.manifest,a);break;case Ft:var s=Xt(a[1]),u=ye(s);Object.assign(this.manifest.sessionData,u)}},Qt.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,a=e.targetDuration,r=e.partTargetDuration;if(t){var i="holdBack",n="partHoldBack",o=a&&3*a,s=r&&2*r;a&&!t.hasOwnProperty(i)&&(t[i]=o),o&&t[i]<o&&(t[i]=o),r&&!t.hasOwnProperty(n)&&(t[n]=3*r),r&&t[n]<s&&(t[n]=s)}};var Gt=function(e,t){var a,r=Jt(t[0].replace("#EXT-X-",""));Kt(t[1])?(a={},a=Object.assign(zt(t[1]),a)):a=Wt(t[1]),e[r]=a},Jt=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},Wt=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},Vt=function(e){var t={},a=e.split("=");return a.length>1&&(t[Jt(a[0])]=Wt(a[1])),t},zt=function(e){for(var t=e.split(","),a={},r=0;t.length>r;r++){var i=t[r],n=Vt(i);a=Object.assign(n,a)}return a},Kt=function(e){return e.indexOf("=")>-1},Yt=function(e,t){return-1===t?[e]:[e.substring(0,t),e.substring(t+1)]},Xt=function(e){var t={};if(e){var a=e.search(",");return[e.slice(0,a),e.slice(a+1)].forEach((function(e,a){for(var r=e.replace(/['"]+/g,"").split("="),i=0;i<r.length;i++)"DATA-ID"===r[i]&&(t["DATA-ID"]=r[1-i]),"VALUE"===r[i]&&(t.VALUE=r[1-i])})),{data:t}}},$t=Qt,Zt={safeCall:function(e,t,a,r){var i=r;if(e&&"function"==typeof e[t])try{i=e[t].apply(e,a)}catch(e){V.info("safeCall error",e)}return i},safeIncrement:ce,getComputedStyle:function(e,t){return e&&t&&Nt.default&&"function"==typeof Nt.default.getComputedStyle?(Lt&&Lt.has(e)&&(a=Lt.get(e)),a||(a=Nt.default.getComputedStyle(e,null),Lt&&Lt.set(e,a)),a.getPropertyValue(t)):"";var a},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:fe,cdnHeadersToRequestId:me,extractHostnameAndDomain:ue,extractHostname:se,manifestParser:$t,generateShortID:H,generateUUID:j,now:C.now,findMediaElement:U},ea={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",PLAYBACK_MODE_CHANGE:"playbackmodechange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},ta={},aa=function(e){var t=arguments;"string"==typeof e?aa.hasOwnProperty(e)?q.default.setTimeout((function(){t=Array.prototype.splice.call(t,1),aa[e].apply(null,t)}),0):V.warn("`"+e+"` is an unknown task"):"function"==typeof e?q.default.setTimeout((function(){e(aa)}),0):V.warn("`"+e+"` is invalid.")},ra={loaded:C.now(),NAME:"mux-embed",VERSION:"5.16.1",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,a){var r=L(U(t),3),i=r[0],n=r[1],o=r[2],s=e.log,u=e.utils.getComputedStyle,d=e.utils.secondsToMs;if(!i)return s.error("No element was found with the `"+n+"` query selector.");if("video"!==o&&"audio"!==o)return s.error("The element of `"+n+"` was not a media element.");i.mux&&(i.mux.destroy(),delete i.mux,s.warn("Already monitoring this video element, replacing existing event listeners"));var l={getPlayheadTime:function(){return d(i.currentTime)},getStateData:function(){var e,t,a=(null===(e=this.getPlayheadTime)||void 0===e?void 0:e.call(this))||d(i.currentTime),r=this.hlsjs&&this.hlsjs.url,n=this.dashjs&&"function"==typeof this.dashjs.getSource&&this.dashjs.getSource(),o={player_is_paused:i.paused,player_width:parseInt(u(i,"width")),player_height:parseInt(u(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:Ot(),video_poster_url:i.poster,video_source_url:r||n||i.currentSrc,video_source_duration:d(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:null==i||null===(t=i.getVideoPlaybackQuality)||void 0===t?void 0:t.call(i).droppedVideoFrames};if(i.getStartDate&&a>0){var s=i.getStartDate();if(s&&"function"==typeof s.getTime&&s.getTime()){var l=s.getTime();if(o.player_program_time=l+a,i.seekable.length>0){var c=l+i.seekable.end(i.seekable.length-1);o.player_live_edge_program_time=c}}}return o}};(a=Object.assign({automaticErrorTracking:!0},a,l)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},a.data),i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(t,a){e.emit(n,t,a)},i.mux.updateData=function(e){i.mux.emit("hb",e)};var c=function(){s.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach((function(e){i.removeEventListener(e,i.mux.listeners[e],!1)})),delete i.mux.listeners,i.mux.fullscreenChangeListener&&(document.removeEventListener("fullscreenchange",i.mux.fullscreenChangeListener,!1),delete i.mux.fullscreenChangeListener),i.mux.destroy=c,i.mux.swapElement=c,i.mux.emit=c,i.mux.addHLSJS=c,i.mux.addDashJS=c,i.mux.removeHLSJS=c,i.mux.removeDashJS=c,i.mux.updateData=c,i.mux.setEmitTranslator=c,i.mux.setStateDataTranslator=c,i.mux.setGetPlayheadTime=c,i.mux.deleted=!0,e.emit(n,"destroy")},i.mux.swapElement=function(t){var a=L(U(t),3),r=a[0],n=a[1],o=a[2];return r?"video"!==o&&"audio"!==o?e.log.error("The element of `"+n+"` was not a media element."):(r.muxId=i.muxId,delete i.muxId,r.mux=r.mux||{},r.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(r.mux.listeners).forEach((function(e){i.removeEventListener(e,r.mux.listeners[e],!1),r.addEventListener(e,r.mux.listeners[e],!1)})),r.mux.fullscreenChangeListener=i.mux.fullscreenChangeListener,delete i.mux.fullscreenChangeListener,r.mux.swapElement=i.mux.swapElement,r.mux.destroy=i.mux.destroy,delete i.mux,void(i=r)):e.log.error("No element was found with the `"+n+"` query selector.")},i.mux.addHLSJS=function(t){e.addHLSJS(n,t)},i.mux.addDashJS=function(t){e.addDashJS(n,t)},i.mux.removeHLSJS=function(){e.removeHLSJS(n)},i.mux.removeDashJS=function(){e.removeDashJS(n)},i.mux.setEmitTranslator=function(t){e.setEmitTranslator(n,t)},i.mux.setStateDataTranslator=function(t){e.setStateDataTranslator(n,t)},i.mux.setGetPlayheadTime=function(t){t||(t=a.getPlayheadTime),e.setGetPlayheadTime(n,t)},e.init(n,a),e.emit(n,"playerready"),i.paused||(e.emit(n,"play"),i.readyState>2&&e.emit(n,"playing")),i.mux.listeners={},qt.forEach((function(t){"error"===t&&!a.automaticErrorTracking||(i.mux.listeners[t]=function(){var a={};if("error"===t){if(!i.error||1===i.error.code)return;a.player_error_code=i.error.code,a.player_error_message=It[i.error.code]||i.error.message}e.emit(n,t,a)},i.addEventListener(t,i.mux.listeners[t],!1))})),i.mux.listeners.enterpictureinpicture=function(){e.emit(n,"playbackmodechange",{player_playback_mode:"pip",player_playback_mode_data:"{}"})},i.mux.listeners.leavepictureinpicture=function(){var t=Ot()?"fullscreen":"standard";e.emit(n,"playbackmodechange",{player_playback_mode:t,player_playback_mode_data:"{}"})},i.addEventListener("enterpictureinpicture",i.mux.listeners.enterpictureinpicture,!1),i.addEventListener("leavepictureinpicture",i.mux.listeners.leavepictureinpicture,!1),i.mux.fullscreenChangeListener=function(){var t=Ot(),a=document.fullscreenElement;if(t&&(a===i||null!=a&&a.contains(i)))e.emit(n,"playbackmodechange",{player_playback_mode:"fullscreen",player_playback_mode_data:"{}"});else if(!t){var r=document.pictureInPictureElement===i?"pip":"standard";e.emit(n,"playbackmodechange",{player_playback_mode:r,player_playback_mode_data:"{}"})}},document.addEventListener("fullscreenchange",i.mux.fullscreenChangeListener,!1)}(aa,e,t)},destroyMonitor:function(e){var t=L(U(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():V.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var a=M(e);ta[a]?ta[a].addHLSJS(t):V.error("A monitor for `"+a+"` has not been initialized.")},addDashJS:function(e,t){var a=M(e);ta[a]?ta[a].addDashJS(t):V.error("A monitor for `"+a+"` has not been initialized.")},removeHLSJS:function(e){var t=M(e);ta[t]?ta[t].removeHLSJS():V.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=M(e);ta[t]?ta[t].removeDashJS():V.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){K()&&t&&t.respectDoNotTrack&&V.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var a=M(e);ta[a]=new Pt(aa,a,t)},emit:function(e,t,a){var r=M(e);ta[r]?(ta[r].emit(t,a),"destroy"===t&&delete ta[r]):V.error("A monitor for `"+r+"` has not been initialized.")},updateData:function(e,t){var a=M(e);ta[a]?ta[a].emit("hb",t):V.error("A monitor for `"+a+"` has not been initialized.")},setEmitTranslator:function(e,t){var a=M(e);ta[a]?ta[a].emitTranslator=t:V.error("A monitor for `"+a+"` has not been initialized.")},setStateDataTranslator:function(e,t){var a=M(e);ta[a]?ta[a].stateDataTranslator=t:V.error("A monitor for `"+a+"` has not been initialized.")},setGetPlayheadTime:function(e,t){var a=M(e);ta[a]?ta[a].getPlayheadTime=t:V.error("A monitor for `"+a+"` has not been initialized.")},checkDoNotTrack:K,log:V,utils:Zt,events:ea,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(aa,ra),void 0!==q.default&&"function"==typeof q.default.addEventListener&&q.default.addEventListener("pagehide",(function(e){e.persisted||(aa.WINDOW_UNLOADING=!0)}),!1);var ia=aa;
/*!
* JavaScript Cookie v2.1.3
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/function na(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function oa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?na(Object(a),!0).forEach((function(t){sa(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):na(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function sa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,i,n=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return da(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?da(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var la=ia.utils,ca=la.findMediaElement,pa=la.secondsToMs,_a=ia.events,ha=ia.log,va=function(e){return 0===e?"preroll":-1===e?"postroll":"midroll"},fa=[_a.LOADSTART,_a.PAUSE,_a.PLAY,_a.PLAYING,_a.SEEKING,_a.SEEKED,_a.TIME_UPDATE,_a.RATECHANGE,_a.STALLED,_a.WAITING,_a.ENDED],ma=function(e){var t,a;return null!==(t=null!==(a=e.currentSrc)&&void 0!==a?a:e.src)&&void 0!==t?t:void 0},ya=function(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{getSrc:ma},i=r.getSrc,n=void 0===i?ma:i,o=ca(e),s=ua(o,1),u=s[0],d=function(){return null==u?void 0:u.mux};if(d())if(null!==(a=google)&&void 0!==a&&a.ima){var l,c,p,_,h,v,f=!1,m=!1,y=!1,g=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=t[0],i=t[1];if(f){if(c&&u.src===c){if(fa.includes(r))return}else fa.includes(r)&&ha.warn("Unexpected event during adbreak:",r);if(r===_a.RENDITION_CHANGE)return void(_=i)}else if(r===_a.PLAY){if(y)return;y=!0}else if(r===_a.PAUSE){if(!y)return;y=!1}return t};d().setEmitTranslator(g);var b=function(){var e;return f&&c&&u.src===c&&null!==(e=v)&&void 0!==e?e:pa(u.currentTime)},T=function(){h={player_is_paused:!0,video_source_url:n(u),video_source_duration:pa(u.duration),video_source_height:u.videoHeight,video_source_width:u.videoWidth},v=pa(u.currentTime)},w=function(){h=void 0,v=void 0},E=function(){var e;return null!==(e=h)&&void 0!==e?e:{}},k=function(e){if(f){var t=m,a=c&&u.src===c?E():{};return oa(oa({},e),{},{player_is_fullscreen:t},a)}return e};d().setStateDataTranslator(k),d().setGetPlayheadTime(b);var D=function(){var e,t,a,r,i,n,o,s,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=null!==(e=null===(t=u.getAdData)||void 0===t?void 0:t.call(u))&&void 0!==e?e:{},l=null!==(a=null===(r=u.getAd)||void 0===r?void 0:r.call(u))&&void 0!==a?a:{},_=p?{ad_tag_url:p}:{},h=null!==(i=null===(n=l.getMediaUrl)||void 0===n?void 0:n.call(l))&&void 0!==i?i:c,v=h?{ad_asset_url:h}:{},y=null!=d&&d.adId?{ad_id:null==d?void 0:d.adId}:{},g=null!=d&&d.creativeId?{ad_creative_id:null==d?void 0:d.creativeId}:{},b=null!=d&&d.universalAdIdValue?{ad_universal_id:null==d?void 0:d.universalAdIdValue}:{};if(h){if(o=h,"function"==typeof l.getAdPodInfo){var T=l.getAdPodInfo(),w=T.getPodIndex(),E=T.getAdPosition();o+=":".concat(w,":").concat(E);var k=T.getTimeOffset();s=va(k)}}else o=p;var D=o?{ad_request_id:o,ad_type:s}:{},A=f?{player_is_fullscreen:m}:{};return oa(oa(oa(oa(oa(oa(oa({},_),v),y),g),b),D),A)};d().triggerAdRequest=function(){d().emit(_a.AD_REQUEST,D())};var A,x,S,P,R=t.requestAds,O=R.bind(t);t.requestAds=function(){for(var e,t,a,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];var o=i[0];return p=null==o?void 0:o.adTagUrl,null===(e=(t=d()).triggerAdRequest)||void 0===e||e.call(t),null===(a=O)||void 0===a?void 0:a.apply(void 0,i)};var L=function(e){l=e.getAdsManager(u),A=l.resize,x=A.bind(l),l.resize=function(e,t,a){var r;return m=a===google.ima.ViewMode.FULLSCREEN,null===(r=x)||void 0===r?void 0:r(e,t,a)},S=l.init,P=S.bind(l),l.init=function(e,t,a){var r;m=a===google.ima.ViewMode.FULLSCREEN;for(var i=arguments.length,n=new Array(i>3?i-3:0),o=3;o<i;o++)n[o-3]=arguments[o];return null===(r=P)||void 0===r?void 0:r.apply(void 0,[e,t,a].concat(n))},K(l)},q=function(e){T(),y&&d().emit(_a.PAUSE),f=!0;var t=D(e);c=t.ad_asset_url,d().emit(_a.AD_BREAK_START),d().emit(_a.AD_PLAY,t)},I=function(e){c=void 0,f&&(f=!1,d().emit(_a.AD_BREAK_END)),_&&(d().emit(_a.RENDITION_CHANGE,_),_=void 0),w()},N=function(e){var t=D(e);c=t.ad_asset_url,d().emit(_a.AD_RESPONSE,t)},C=function(e){var t=D(e);d().emit(_a.AD_PLAYING,t)},j=function(e){var t=D(e);d().emit(_a.AD_PLAY,t),d().emit(_a.AD_PLAYING,t)},H=function(e){var t=D(e);d().emit(_a.AD_PAUSE,t)},M=function(e){var t=D(e);d().emit(_a.AD_FIRST_QUARTILE,t)},U=function(e){var t=D(e);d().emit(_a.AD_MID_POINT,t)},B=function(e){var t=D(e);d().emit(_a.AD_THIRD_QUARTILE,t)},F=function(e){var t=D(e);d().emit(_a.AD_ENDED,t)},Q=function(e){var t=D(e);d().emit(_a.AD_ENDED,t)},G=function(e){f=!1,c=void 0,p=void 0,_=void 0,w()},J=function(e){var t=D(e);d().emit(_a.AD_RESPONSE,t)},W=function(e){e.getError().getType()===google.ima.AdError.Type.AD_LOAD&&d().emit(_a.AD_RESPONSE,D()),d().emit(_a.AD_ERROR)},V=function(e){e.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,L),e.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,W)},z=function(e){e.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,L),e.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,W)},K=function(e){e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,q),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,I),e.addEventListener(google.ima.AdEvent.Type.LOADED,N),e.addEventListener(google.ima.AdEvent.Type.STARTED,C),e.addEventListener(google.ima.AdEvent.Type.RESUMED,j),e.addEventListener(google.ima.AdEvent.Type.PAUSED,H),e.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,M),e.addEventListener(google.ima.AdEvent.Type.MIDPOINT,U),e.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,B),e.addEventListener(google.ima.AdEvent.Type.COMPLETE,F),e.addEventListener(google.ima.AdEvent.Type.SKIPPED,Q),e.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,G),e.addEventListener(google.ima.AdEvent.Type.AD_METADATA,J),e.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,W)},Y=function(e){e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,q),e.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,I),e.removeEventListener(google.ima.AdEvent.Type.LOADED,N),e.removeEventListener(google.ima.AdEvent.Type.STARTED,C),e.removeEventListener(google.ima.AdEvent.Type.RESUMED,j),e.removeEventListener(google.ima.AdEvent.Type.PAUSED,H),e.removeEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,M),e.removeEventListener(google.ima.AdEvent.Type.MIDPOINT,U),e.removeEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,B),e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,F),e.removeEventListener(google.ima.AdEvent.Type.SKIPPED,Q),e.removeEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,G),e.removeEventListener(google.ima.AdEvent.Type.AD_METADATA,J),e.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,W)};d().swapElement=function(e){ha.error("swapElement() is not supported when using google-ima.")};var X=d().destroy;d().destroy=function(){var e=d();z(t),R&&(t.requestAds=R,R=O=void 0),l&&(Y(l),A&&(l.resize=A,A=x=void 0),S&&(l.init=S,S=P=void 0),l=void 0),e.swapElement=function(){},e.triggerAdRequest=function(){},e.setEmitTranslator(void 0),e.setStateDataTranslator(void 0),e.setGetPlayheadTime(void 0),X()},V(t)}else ha.error("Missing google.ima SDK. Make sure you include it via a script tag.");else ha.error("Missing mux data instance.")};function ga(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,i,n=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ba(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ba(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var Ta=ia.utils.findMediaElement,wa=ia.monitor,Ea=function(e,t){return function(e){return null!=e.hlsjs&&null!=e.Hls}(t)?function(e,t){var a=t.hlsjs;return t.Hls,{getSrc:function(e){var t,r;return null!==(t=null===(r=a)||void 0===r?void 0:r.url)&&void 0!==t?t:ma(e)},addHLSJS:function(e){a=e.hlsjs,e.Hls},removeHLSJS:function(){a=void 0}}}(0,t):function(e){return null!=e.dashjs}(t)?function(e,t){var a=t.dashjs;return{getSrc:function(e){var t,r;return null!==(t=null===(r=a)||void 0===r?void 0:r.getSource())&&void 0!==t?t:ma(e)},addDashJS:function(e){a=e.dashjs},removeDashJS:function(){a=void 0}}}(0,t):{getSrc:ma}},ka=function(e,t){"addHLSJS"in t&&function(e,t){var a,r=null==(a=ga(Ta(e),1)[0])?void 0:a.mux,i=r.addHLSJS,n=r.removeHLSJS;r.addHLSJS=function(e){t.addHLSJS(e),i(e)},r.removeHLSJS=function(){t.removeHLSJS(),n()}}(e,t),"addDashJS"in t&&function(e,t){var a,r=null==(a=ga(Ta(e),1)[0])?void 0:a.mux,i=r.addDashJS,n=r.removeDashJS;r.addDashJS=function(e){t.addDashJS(e),i(e)},r.removeDashJS=function(){t.removeDashJS(),n()}}(e,t)},Da={initializeIma:ya,monitor:function(e,t){var a=t.imaAdsLoader;if(wa(e,t),a){var r=Ea(0,t);ya(e,a,{getSrc:r.getSrc}),ka(e,r)}}},Aa=function(){return ia.apply(void 0,arguments)};Object.assign(Aa,ia,Da);var xa=Aa}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}return a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a(254)}()},"object"==typeof exports&&"object"==typeof module?module.exports=t():"object"==typeof exports?exports.mux=t():e.mux=t()}();